<!DOCTYPE html>
<html>
<head>
  <title>Bloom College - Student Registration Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .container {
      max-width: 700px;
    }
    .highlight {
      border: 2px solid #0d6efd;
      background-color: #eef6ff;
    }
    .spinner-border {
      width: 1.5rem;
      height: 1.5rem;
    }
  </style>
</head>
<body>

<div class="container mt-5 mb-5">
  <h2 class="text-center fw-bold">BLOOM COLLEGE</h2>
  <h4 class="text-center mb-4">Student Registration Form</h4>

  <form id="myForm">
  
    <!-- Student Image Upload -->
<div class="mb-3 row align-items-center text-center">
  <label for="studentImage" class="col-sm-3 col-form-label fw-bold text-start">
    Student Image:
  </label>
  <div class="col-sm-4">
    <!-- Preview area -->
    <img id="previewImage" 
         src="" 
         alt="No image" 
         style="display:none; width:100px; height:100px; border:1px solid #ccc; margin-bottom:8px; object-fit:cover;">
    
    <!-- Upload input -->
    <input type="file" 
           class="form-control" 
           id="studentImage" 
           accept="image/*" 
           required>
  </div>
  <div class="col-sm-3 text-muted text-start">(less than 5 Mb)</div>
</div>


    <!-- Student Name -->
    <div class="mb-3">
      <label>Student Name:</label>
      <input type="text" id="studentName" class="form-control" placeholder="Enter your full name" onchange="toUpper(this)" oninput="countChars(this)" required>
      <small id="charCount" class="text-muted">0 characters</small>
    </div>

    <!-- Father's Name -->
    <div class="mb-3">
      <label>Father's Name:</label>
      <input type="text" id="fatherName" class="form-control" onchange="toUpper(this)" required>
    </div>

    <!-- Mother's Name -->
    <div class="mb-3">
      <label>Mother's Name:</label>
      <input type="text" id="motherName" class="form-control" onchange="toUpper(this)" required>
    </div>

    <!-- Gender -->
    <label>Gender:</label><br>
<input type="radio" name="gender" value="Male"> Male
<input type="radio" name="gender" value="Female"> Female
<input type="radio" name="gender" value="Prefer Not to Say" required> Prefer not to say



    <!-- Birthday -->
    <div class="mb-3">
      <label>Date of Birth:</label>
      <input type="date" class="form-control" id="dob" required>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label>Email:</label>
      <input type="email" id="email" class="form-control" placeholder="example@gmail.com"
             onfocus="highlightField(this)" onblur="checkEmail(this)" required>
      <div id="emailError" class="text-danger small mt-1"></div>
    </div>

    <!-- Level -->
    <div class="mb-3">
      <label>Level:</label>
      <select class="form-select">
        <option>PhD</option>
        <option>Master</option>
        <option>Bachelor</option>
        <option>Diploma</option>
      </select>
    </div>

    <!-- Department -->
    <div class="mb-3">
      <label>Department:</label>
      <select class="form-select">
        <option>Computer Engineering</option>
        <option>Information Technology</option>
        <option>Business Administration</option>
      </select>
    </div>

    <!-- nombo tepon -->
    <div class="mb-3">
      <label>Tel/Mobile:</label>
      <input type="tel" class="form-control" id="tel" placeholder="01x-xxxxxxx">
    </div>

    <!-- Address -->
    <h5>Address</h5>
    <div class="mb-3">
      <label>State:</label>
      <input type="text" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>City:</label>
      <input type="text" class="form-control">
    </div>
    <div class="mb-3">
      <label>Postcode:</label>
      <input type="text" class="form-control">
    </div>

    <!-- Buttons -->
    <div class="text-center">
      <button type="submit" class="btn btn-primary" onclick="submitForm()">Register</button>
      <button type="reset" class="btn btn-secondary ms-2">Reset</button>
    </div>
  </form>
</div>

<!-- Bootstrap Modal -->
<div class="modal fade" id="successModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title">Success</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center">
        <div id="loadingSpinner" class="d-none">
          <div class="spinner-border text-success" role="status"></div>
          <p class="mt-2">saving your data...</p>
        </div>
        <div id="successMessage" class="d-none">
          üéâ Your information have been saved successfully!üéâ
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
const imageInput = document.getElementById('studentImage');
  const preview = document.getElementById('previewImage');

  imageInput.addEventListener('change', function () {
    const file = this.files[0];
    if (file) {
      if (file.size > 5 * 1024 * 1024) { // check file size (5 MB)
        alert("File is too big! Please select an image smaller than 5 MB.");
        this.value = ""; // clear input
        preview.style.display = "none";
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
        preview.style.display = "block";
      };
      reader.readAsDataURL(file);
    } else {
      preview.style.display = "none";
    }
  });

function validateForm() {
  let name = document.getElementById("name").value.trim();
  let email = document.getElementById("email").value.trim();
  let genderSelected = document.querySelector('input[name="gender"]:checked');
  let message = document.getElementById("message");

  // Reset message
  message.style.color = "red";
  message.innerHTML = "";

  // Name validation
  if (name === "") {
    message.innerHTML = "‚ö†Ô∏è Please enter your full name!";
    return;
  }

  // Email validation
  if (email === "") {
    message.innerHTML = "‚ö†Ô∏è Please enter your email!";
    return;
  } else if (!email.includes("@") || !email.includes(".")) {
    message.innerHTML = "‚ö†Ô∏è Please enter a valid email address!";
    return;
  }

  // gender check
  if (!genderSelected) {
    message.innerHTML = "‚ö†Ô∏è Please select your gender!";
    return;
  }

  // If all OK
  message.style.color = "green";
  message.innerHTML = "‚úÖ Form submitted successfully!";

// Convert name to uppercase
function toUpper(input) {
  input.value = input.value.toUpperCase();
}

// On focus
function highlightField(input) {
  input.classList.add("highlight");
}

// On blur
function checkEmail(input) {
  input.classList.remove("highlight");
  let emailError = document.getElementById("emailError");
  let emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
  if (input.value === "") {
    emailError.innerText = "‚ö†Ô∏è Email cannot be empty!";
  } else if (!input.value.match(emailPattern)) {
    emailError.innerText = "‚ö†Ô∏è Please enter a valid email address!";
  } else {
    emailError.innerText = "";
  }
}

// kira huruf dkt student name
function countChars(input) {
  document.getElementById("charCount").innerText = input.value.length + " characters";
}

// Submit form
function submitForm() {
  var modal = new bootstrap.Modal(document.getElementById('successModal'));
  modal.show();

  // Show spinner first
  document.getElementById("loadingSpinner").classList.remove("d-none");
  document.getElementById("successMessage").classList.add("d-none");

  // After 2 seconds, show success message
  setTimeout(function() {
    document.getElementById("loadingSpinner").classList.add("d-none");
    document.getElementById("successMessage").classList.remove("d-none");
  }, 2000);
}
}
</script>

</body>
</html>
